set ( SRC_FILES
	src/ADARAPackets.cpp
	src/ADARAParser.cpp
	src/AppendGeometryToSNSNexus.cpp
	src/CompressEvents.cpp
	src/CreateChopperModel.cpp
	src/CreateModeratorModel.cpp
	src/CreateSampleShape.cpp
	src/CreateSimulationWorkspace.cpp
	src/DefineGaugeVolume.cpp
	src/DeleteTableRows.cpp
	src/DetermineChunking.cpp
	src/FakeEventDataListener.cpp
	src/FakeISISHistoDAE.cpp
	src/FileEventDataListener.cpp
	src/FindDetectorsInShape.cpp
	src/FindDetectorsPar.cpp
	src/GenerateGroupingPowder.cpp
	src/GetMaskedDetectors.cpp
	src/GroupDetectors.cpp
	src/GroupDetectors2.cpp
	src/ISISDataArchive.cpp
	src/ISISHistoDataListener.cpp
	src/ISISRunLogs.cpp
	src/LiveDataAlgorithm.cpp
	src/Load.cpp
	src/LoadAscii.cpp
	src/LoadCalFile.cpp
	src/LoadCanSAS1D.cpp
	src/LoadCanSAS1D2.cpp
	src/LoadDAE.cpp
	src/LoadDAE/idc.cpp
	src/LoadDAE/idc.h
	src/LoadDAE/isisds_command.cpp
	src/LoadDAE/isisds_command.h
	src/LoadDaveGrp.cpp
	src/LoadDetectorInfo.cpp
	src/LoadDetectorsGroupingFile.cpp
	src/LoadDspacemap.cpp
	src/LoadEmptyInstrument.cpp
	src/LoadEventNexus.cpp
	src/LoadEventPreNexus.cpp
	src/LoadEventPreNexus2.cpp
	src/LoadFullprofResolution.cpp
	src/LoadGSS.cpp
	src/LoadILL.cpp
	src/LoadISISNexus.cpp
	src/LoadISISNexus2.cpp
	src/LoadInstrument.cpp
	src/LoadInstrumentFromNexus.cpp
	src/LoadInstrumentFromRaw.cpp
	src/LoadIsawDetCal.cpp
	src/LoadLLB.cpp
	src/LoadLOQDistancesFromRaw.cpp
	src/LoadLiveData.cpp
	src/LoadLog.cpp
	src/LoadLogsForSNSPulsedMagnet.cpp
	src/LoadLogsFromSNSNexus.cpp
	src/LoadMappingTable.cpp
	src/LoadMask.cpp
	src/LoadMaskingFile.cpp
	src/LoadMcStasNexus.cpp
	src/LoadMcStasEventNexus.cpp
	src/LoadMuonLog.cpp
	src/LoadMuonNexus.cpp
	src/LoadMuonNexus1.cpp
	src/LoadMuonNexus2.cpp
	src/LoadNXSPE.cpp
	src/LoadNexus.cpp
	src/LoadNexusLogs.cpp
	src/LoadNexusMonitors.cpp
	src/LoadNexusProcessed.cpp
	src/LoadPDFgetNFile.cpp
	src/LoadSINQ.cpp
	src/LoadParameterFile.cpp
	src/LoadPreNexus.cpp
	src/LoadPreNexusMonitors.cpp
	src/LoadQKK.cpp
	src/LoadRKH.cpp
	src/LoadRaw.cpp
	src/LoadRaw/byte_rel_comp.cpp
	src/LoadRaw/isisraw.cpp
	src/LoadRaw/isisraw2.cpp
	src/LoadRaw/item_struct.cpp
	src/LoadRaw/vms_convert.cpp
	src/LoadRaw2.cpp
	src/LoadRaw3.cpp
	src/LoadRawBin0.cpp
	src/LoadRawHelper.cpp
	src/LoadRawSpectrum0.cpp
	src/LoadSNSEventNexus.cpp
	src/LoadSNSNexus.cpp
	src/LoadSNSspec.cpp
	src/LoadSPE.cpp
	src/LoadSampleDetailsFromRaw.cpp
	src/LoadSassena.cpp
	src/LoadSpec.cpp
	src/LoadSpice2D.cpp
	src/LoadTOFRawNexus.cpp
	src/ManagedRawFileWorkspace2D.cpp
	src/MaskDetectors.cpp
	src/MaskDetectorsInShape.cpp
	src/MergeLogs.cpp
	src/ModifyDetectorDotDatFile.cpp
	src/MonitorLiveData.cpp
	src/MoveInstrumentComponent.cpp
	src/NexusTester.cpp
	src/ProcessDasNexusLog.cpp
	src/RawFileInfo.cpp
	src/RemoveLogs.cpp
	src/RenameLog.cpp
	src/RotateInstrumentComponent.cpp
	src/SNSDataArchive.cpp
	src/SNSDataArchiveICAT2.cpp
	src/SNSLiveEventDataListener.cpp
	src/SaveAscii.cpp
	src/SaveCSV.cpp
	src/SaveCalFile.cpp
	src/SaveCanSAS1D.cpp
	src/SaveCanSAS1D2.cpp
	src/SaveDaveGrp.cpp
	src/SaveDetectorMasks.cpp
	src/SaveDetectorsGrouping.cpp
	src/SaveDspacemap.cpp
	src/SaveFocusedXYE.cpp
	src/SaveFullprofResolution.cpp
	src/SaveGSS.cpp
	src/SaveISISNexus.cpp
	src/SaveIsawDetCal.cpp
	src/SaveMask.cpp
	src/SaveNISTDAT.cpp
	src/SaveNXSPE.cpp
	src/SaveNexus.cpp
	src/SaveNexusProcessed.cpp
	src/SavePAR.cpp
	src/SavePHX.cpp
	src/SaveRKH.cpp
	src/SaveSPE.cpp
	src/SaveToSNSHistogramNexus.cpp
	src/SaveVTK.cpp
	src/SetSampleMaterial.cpp
	src/SetScalingPSD.cpp
	src/StartLiveData.cpp
	src/UpdateInstrumentFromFile.cpp
)

set ( SRC_UNITY_IGNORE_FILES src/LoadDAE/idc.cpp
        src/LoadDAE/isisds_command.cpp)

set ( INC_FILES
	inc/MantidDataHandling/ADARA.h
	inc/MantidDataHandling/ADARAPackets.h
	inc/MantidDataHandling/ADARAParser.h
	inc/MantidDataHandling/AppendGeometryToSNSNexus.h
	inc/MantidDataHandling/CompressEvents.h
	inc/MantidDataHandling/CreateChopperModel.h
	inc/MantidDataHandling/CreateModeratorModel.h
	inc/MantidDataHandling/CreateSampleShape.h
	inc/MantidDataHandling/CreateSimulationWorkspace.h
	inc/MantidDataHandling/DefineGaugeVolume.h
	inc/MantidDataHandling/DeleteTableRows.h
	inc/MantidDataHandling/DetermineChunking.h
	inc/MantidDataHandling/FakeEventDataListener.h
	inc/MantidDataHandling/FakeISISHistoDAE.h
	inc/MantidDataHandling/FileEventDataListener.h
	inc/MantidDataHandling/FindDetectorsInShape.h
	inc/MantidDataHandling/FindDetectorsPar.h
	inc/MantidDataHandling/GenerateGroupingPowder.h
	inc/MantidDataHandling/GetMaskedDetectors.h
	inc/MantidDataHandling/GroupDetectors.h
	inc/MantidDataHandling/GroupDetectors2.h
	inc/MantidDataHandling/ISISDataArchive.h
	inc/MantidDataHandling/ISISHistoDataListener.h
	inc/MantidDataHandling/ISISRunLogs.h
	inc/MantidDataHandling/LiveDataAlgorithm.h
	inc/MantidDataHandling/Load.h
	inc/MantidDataHandling/LoadAscii.h
	inc/MantidDataHandling/LoadCalFile.h
	inc/MantidDataHandling/LoadCanSAS1D.h
	inc/MantidDataHandling/LoadCanSAS1D2.h
	inc/MantidDataHandling/LoadDAE.h
	inc/MantidDataHandling/LoadDaveGrp.h
	inc/MantidDataHandling/LoadDetectorInfo.h
	inc/MantidDataHandling/LoadDetectorsGroupingFile.h
	inc/MantidDataHandling/LoadDspacemap.h
	inc/MantidDataHandling/LoadEmptyInstrument.h
	inc/MantidDataHandling/LoadEventNexus.h
	inc/MantidDataHandling/LoadEventPreNexus.h
	inc/MantidDataHandling/LoadEventPreNexus2.h
	inc/MantidDataHandling/LoadFullprofResolution.h
	inc/MantidDataHandling/LoadGSS.h
	inc/MantidDataHandling/LoadILL.h
	inc/MantidDataHandling/LoadISISNexus.h
	inc/MantidDataHandling/LoadISISNexus2.h
	inc/MantidDataHandling/LoadInstrument.h
	inc/MantidDataHandling/LoadInstrumentFromNexus.h
	inc/MantidDataHandling/LoadInstrumentFromRaw.h
	inc/MantidDataHandling/LoadIsawDetCal.h
	inc/MantidDataHandling/LoadLLB.h
	inc/MantidDataHandling/LoadLOQDistancesFromRaw.h
	inc/MantidDataHandling/LoadLiveData.h
	inc/MantidDataHandling/LoadLog.h
	inc/MantidDataHandling/LoadLogsForSNSPulsedMagnet.h
	inc/MantidDataHandling/LoadLogsFromSNSNexus.h
	inc/MantidDataHandling/LoadMappingTable.h
	inc/MantidDataHandling/LoadMask.h
	inc/MantidDataHandling/LoadMaskingFile.h
	inc/MantidDataHandling/LoadMcStasNexus.h
	inc/MantidDataHandling/LoadMcStasEventNexus.h
	inc/MantidDataHandling/LoadMuonLog.h
	inc/MantidDataHandling/LoadMuonNexus.h
	inc/MantidDataHandling/LoadMuonNexus1.h
	inc/MantidDataHandling/LoadMuonNexus2.h
	inc/MantidDataHandling/LoadNXSPE.h
	inc/MantidDataHandling/LoadNexus.h
	inc/MantidDataHandling/LoadNexusLogs.h
	inc/MantidDataHandling/LoadNexusMonitors.h
	inc/MantidDataHandling/LoadNexusProcessed.h
	inc/MantidDataHandling/LoadPDFgetNFile.h
	inc/MantidDataHandling/LoadSINQ.h
	inc/MantidDataHandling/LoadParameterFile.h
	inc/MantidDataHandling/LoadPreNexus.h
	inc/MantidDataHandling/LoadPreNexusMonitors.h
	inc/MantidDataHandling/LoadQKK.h
	inc/MantidDataHandling/LoadRKH.h
	inc/MantidDataHandling/LoadRaw.h
	inc/MantidDataHandling/LoadRaw2.h
	inc/MantidDataHandling/LoadRaw3.h
	inc/MantidDataHandling/LoadRawBin0.h
	inc/MantidDataHandling/LoadRawHelper.h
	inc/MantidDataHandling/LoadRawSpectrum0.h
	inc/MantidDataHandling/LoadSNSEventNexus.h
	inc/MantidDataHandling/LoadSNSNexus.h
	inc/MantidDataHandling/LoadSNSspec.h
	inc/MantidDataHandling/LoadSPE.h
	inc/MantidDataHandling/LoadSampleDetailsFromRaw.h
	inc/MantidDataHandling/LoadSassena.h
	inc/MantidDataHandling/LoadSpec.h
	inc/MantidDataHandling/LoadSpice2D.h
	inc/MantidDataHandling/LoadTOFRawNexus.h
	inc/MantidDataHandling/ManagedRawFileWorkspace2D.h
	inc/MantidDataHandling/MaskDetectors.h
	inc/MantidDataHandling/MaskDetectorsInShape.h
	inc/MantidDataHandling/MergeLogs.h
	inc/MantidDataHandling/ModifyDetectorDotDatFile.h
	inc/MantidDataHandling/MonitorLiveData.h
	inc/MantidDataHandling/MoveInstrumentComponent.h
	inc/MantidDataHandling/NexusTester.h
	inc/MantidDataHandling/ProcessDasNexusLog.h
	inc/MantidDataHandling/RawFileInfo.h
	inc/MantidDataHandling/RemoveLogs.h
	inc/MantidDataHandling/RenameLog.h
	inc/MantidDataHandling/RotateInstrumentComponent.h
	inc/MantidDataHandling/SNSDataArchive.h
	inc/MantidDataHandling/SNSDataArchiveICAT2.h
	inc/MantidDataHandling/SNSLiveEventDataListener.h
	inc/MantidDataHandling/SaveAscii.h
	inc/MantidDataHandling/SaveCSV.h
	inc/MantidDataHandling/SaveCalFile.h
	inc/MantidDataHandling/SaveCanSAS1D.h
	inc/MantidDataHandling/SaveCanSAS1D2.h
	inc/MantidDataHandling/SaveDaveGrp.h
	inc/MantidDataHandling/SaveDetectorMasks.h
	inc/MantidDataHandling/SaveDetectorsGrouping.h
	inc/MantidDataHandling/SaveDspacemap.h
	inc/MantidDataHandling/SaveFocusedXYE.h
	inc/MantidDataHandling/SaveFullprofResolution.h
	inc/MantidDataHandling/SaveGSS.h
	inc/MantidDataHandling/SaveISISNexus.h
	inc/MantidDataHandling/SaveIsawDetCal.h
	inc/MantidDataHandling/SaveMask.h
	inc/MantidDataHandling/SaveNISTDAT.h
	inc/MantidDataHandling/SaveNXSPE.h
	inc/MantidDataHandling/SaveNexus.h
	inc/MantidDataHandling/SaveNexusProcessed.h
	inc/MantidDataHandling/SavePAR.h
	inc/MantidDataHandling/SavePHX.h
	inc/MantidDataHandling/SaveRKH.h
	inc/MantidDataHandling/SaveSPE.h
	inc/MantidDataHandling/SaveToSNSHistogramNexus.h
	inc/MantidDataHandling/SaveVTK.h
	inc/MantidDataHandling/SetSampleMaterial.h
	inc/MantidDataHandling/SetScalingPSD.h
	inc/MantidDataHandling/StartLiveData.h
	inc/MantidDataHandling/UpdateInstrumentFromFile.h
	src/LoadRaw/byte_rel_comp.h
	src/LoadRaw/isisraw.h
	src/LoadRaw/isisraw2.h
	src/LoadRaw/item_struct.h
	src/LoadRaw/vms_convert.h
)

set ( TEST_FILES
	#LoadSNSNexusTest.h # TODO has no active tests in it
	#Needs fixing to not rely on network. SNSLiveEventDataListenerTest.h
	ADARAPacketTest.h
	AppendGeometryToSNSNexusTest.h
	CompressEventsTest.h
	CreateChopperModelTest.h
	CreateModeratorModelTest.h
	CreateSampleShapeTest.h
	CreateSimulationWorkspaceTest.h
	DefineGaugeVolumeTest.h
	DeleteTableRowsTest.h
	DetermineChunkingTest.h
	FakeEventDataListenerTest.h
	FileEventDataListenerTest.h
	FindDetectorsInShapeTest.h
	FindDetectorsParTest.h
	GenerateGroupingPowderTest.h
	GetMaskedDetectorsTest.h
	GroupDetectors2Test.h
	GroupDetectorsTest.h
	ISISDataArchiveTest.h
	ISISHistoDataListenerTest.h
	InstrumentRayTracerTest.h
	LiveDataAlgorithmTest.h
	LoadAsciiTest.h
	LoadCalFileTest.h
	LoadCanSAS1dTest.h
	LoadDAETest.h
	LoadDaveGrpTest.h
	LoadDetectorInfoTest.h
	LoadDetectorsGroupingFileTest.h
	LoadDspacemapTest.h
	LoadEmptyInstrumentTest.h
	LoadEventNexusTest.h
	LoadEventPreNexus2Test.h
	LoadEventPreNexusTest.h
	LoadFullprofResolutionTest.h
	LoadGSSTest.h
	LoadILLTest.h
	LoadISISNexusTest.h
	LoadInstrumentFromRawTest.h
	LoadInstrumentTest.h
	LoadIsawDetCalTest.h
	LoadLLBTest.h
	LoadLiveDataTest.h
	LoadLogTest.h
	LoadLogsFromSNSNexusTest.h
	LoadMappingTableTest.h
	LoadMaskTest.h
	LoadMcStasNexusTest.h
	LoadMcStasEventNexusTest.h
	LoadMuonLogTest.h
	LoadMuonNexus1Test.h
	LoadMuonNexus2Test.h
	LoadNXSPETest.h
	LoadNexusLogsTest.h
	LoadNexusMonitorsTest.h
	LoadNexusProcessedTest.h
	LoadNexusTest.h
	LoadPDFgetNFileTest.h
	LoadSINQTest.h
	LoadParameterFileTest.h
	LoadPreNexusMonitorsTest.h
	LoadPreNexusTest.h
	LoadQKKTest.h
	LoadRKHTest.h
	LoadRaw2Test.h
	LoadRaw3Test.h
	LoadRawBin0Test.h
	LoadRawSaveNxsLoadNxsTest.h
	LoadRawSpectrum0Test.h
	LoadRawTest.h
	LoadSNSEventNexusTest.h
	LoadSNSspecTest.h
	LoadSPETest.h
	LoadSassenaTest.h
	LoadSaveAsciiTest.h
	LoadSpice2dTest.h
	LoadTOFRawNexusTest.h
	LoadTest.h
	ManagedRawFileWorkspace2DTest.h
	MaskDetectorsInShapeTest.h
	MaskDetectorsTest.h
	MergeLogsTest.h
	MonitorLiveDataTest.h
	MoveInstrumentComponentTest.h
	NexusTesterTest.h
	ProcessDasNexusLogTest.h
	RawFileInfoTest.h
	RemoveLogsTest.h
	RenameLogTest.h
	RotateInstrumentComponentTest.h
	SNSDataArchiveICAT2Test.h
	SNSDataArchiveTest.h
	SaveAsciiTest.h
	SaveCSVTest.h
	SaveCalFileTest.h
	SaveCanSAS1dTest.h
	SaveCanSAS1dTest2.h
	SaveDaveGrpTest.h
	SaveDetectorsGroupingTest.h
	SaveDspacemapTest.h
	SaveFocussedXYETest.h
	SaveFullprofResolutionTest.h
	SaveIsawDetCalTest.h
	SaveMaskTest.h
	SaveNISTDATTest.h
	SaveNXSPETest.h
	SaveNexusProcessedTest.h
	SaveNexusTest.h
	SavePARTest.h
	SavePHXTest.h
	SaveRKHTest.h
	SaveSPETest.h
	SaveToSNSHistogramNexusTest.h
	SetSampleMaterialTest.h
	SetScalingPSDTest.h
	StartLiveDataTest.h
	UpdateInstrumentFromFileTest.h
	XMLlogfileTest.h
)


if(UNITY_BUILD)
  include(UnityBuild)
  enable_unity_build(CurveFitting SRC_FILES SRC_UNITY_IGNORE_FILES 10)
endif(UNITY_BUILD)

# Use a precompiled header where they are supported
enable_precompiled_headers( inc/MantidDataHandling/PrecompiledHeader.h SRC_FILES )
# Add the target for this directory
add_library ( DataHandling ${SRC_FILES} ${INC_FILES})
# Set the name of the generated library
set_target_properties ( DataHandling PROPERTIES OUTPUT_NAME MantidDataHandling )
# Add to the 'Framework' group in VS
set_property ( TARGET DataHandling PROPERTY FOLDER "MantidFramework" )

IF (${CMAKE_SYSTEM_NAME} MATCHES "Windows" OR ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
	SET (HDF5_DIR "${CMAKE_MODULE_PATH}")
	#SET (HDF5_CONFIG "${CMAKE_MODULE_PATH}/hdf5-config.cmake" )
	find_package ( HDF5 COMPONENTS HL REQUIRED
				        CONFIGS hdf5-config.cmake )
ELSE()
	find_package ( HDF5 COMPONENTS HL REQUIRED )
ENDIF()

#message (STATUS "HDF5_INCLUDE_DIRS:" ${HDF5_INCLUDE_DIRS})
#message (STATUS "HDF5_LIBRARIES:" ${HDF5_LIBRARIES})

include_directories ( inc ../Nexus/inc ${HDF5_INCLUDE_DIRS})
#include_directories ( inc ../Nexus/inc)

target_link_libraries ( DataHandling ${MANTIDLIBS} Nexus ${NEXUS_LIBRARIES} ${HDF5_LIBRARIES})
#target_link_libraries ( DataHandling ${MANTIDLIBS} Nexus)

# Add the unit tests directory
add_subdirectory ( test )

###########################################################################
# Installation settings
###########################################################################

install ( TARGETS DataHandling ${SYSTEM_PACKAGE_TARGET} DESTINATION ${PLUGINS_DIR} )
