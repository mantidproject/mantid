{% set version = load_setup_py_data(setup_file='../../../setup.py', from_recipe_dir=True).get('version', '0.0.0') %}

package:
  name: mantid-developer
  version: {{ version }}

requirements:
  run:
    - ccache
    - cmake {{ cmake }}
    - conda-wrappers # [win]
    - doxygen {{ doxygen }}
    - eigen {{ eigen }}
    - euphonic {{ euphonic }}
    - gdk-pixbuf {{ gdk_pixbuf }} # [win]
    # remove seekpath altogether once newer euphonic is released
    - seekpath=2.1.0=*2
    - graphviz {{ graphviz }}
    - gsl {{ gsl }}
    - h5py
    - hdf4 {{ hdf4 }}
    - hdf5 {{ hdf5 }}
    - jemalloc {{ jemalloc }} # [linux]
    - jsoncpp {{ jsoncpp }}
    - lib3mf # [win]
    - libboost-devel {{ libboost }}
    - libboost-python-devel {{ libboost }}
    - libopenblas {{ libopenblas }} # [osx or linux]
    - librdkafka {{ librdkafka }}
    - lz4  # [linux]
    - matplotlib {{ matplotlib }}
    - muparser {{ muparser }}
    - ninja {{ ninja }}
    - numpy {{ numpy }}
    - occt {{ occt }}
    - pip {{ pip }}
    - poco {{ poco }}
    - psutil {{ psutil }}
    - pycifrw
    - pydantic {{ pydantic }}
    - pyqt {{ pyqt }}
    - pyqt5-sip {{ pyqt5_sip }}
    - pyqtwebengine
    - pystack # [linux]
    - pystog {{ pystog }}
    - python-dateutil {{ python_dateutil }}
    - python {{ python }}
    - python.app # [osx]
    - pyvista {{ pyvista }}
    - pyvistaqt
    - superqt
    - pyyaml {{ pyyaml }}
    - qscintilla2 {{ qscintilla2 }}
    - qt-main {{ qt_main }}
    - qtconsole {{ qtconsole }}
    - qtpy {{ qtpy }}
    - qt-gtk-platformtheme # [linux]
    - quasielasticbayes {{ quasielasticbayes }}
    - quickbayes {{ quickbayes }}
    - requests>=2.32.4
    - scipy {{ scipy }}
    - setuptools
    - sphinx {{ sphinx }}
    - sphinx_bootstrap_theme {{ sphinx_bootstrap_theme }}
    - tbb-devel {{ tbb }}
    - texlive-core {{ texlive_core }} # [linux]
    - toml {{ toml }}
    - versioningit {{ versioningit }}
    - zlib
    - joblib
    - orsopy {{ orsopy }}

    # Not Windows, OpenGL implementation:
    - libgl-devel      # [linux]

    # Linux only
    - gxx_linux-64 {{ cxx_compiler_version }} # [linux]
    - libglu {{ libglu }} # [linux]

    # Needed for test suite on Linux
    - xorg-libxcomposite>=0.4.5 # [linux]
    - xorg-libxcursor>=1.2.0 # [linux]
    - xorg-libxdamage>=1.1.5 # [linux]
    - xorg-libxi>=1.7.10 # [linux]
    - xorg-libxscrnsaver>=1.2.3 # [linux]
    - xorg-libxtst>=1.2.3 # [linux]

    # Development tooling
    - cppcheck==2.18.1
    - gcovr>=4.2 # [linux]
    - pre-commit>=4.0
    - libcxx # [osx]

    # Use conda version of clang to get matching CXXFLAGS.
    # Pinned to same version as conda forge: https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/main/recipe/conda_build_config.yaml
    - clang_osx-arm64 {{ c_compiler_version }} # [osx]
    - clangxx_osx-arm64 {{ cxx_compiler_version }} # [osx]
    - llvm-openmp {{ llvm_openmp }} # [osx]

about:
  home: https://github.com/mantidproject/mantid
  license: GPL-3.0-or-later
  summary: A metapackage for mantid developers
  description: A metapackage containing the dependencies required for building, testing and developing mantid.

extra:
  recipe-maintainers:
    - thomashampson
