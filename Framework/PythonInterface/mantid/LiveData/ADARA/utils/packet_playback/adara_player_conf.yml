# live-data playback configuration

##
## Values from the environment, expressed as `${KEY}`, will be replaced during load.
##

server:
  name: 'adara_player' # will be overridden by `${adara_player_name}` (in environment)

  # WARNING: this replacement is special:
  #   in order to work on all systems, DO NOT use `${XDG_RUNTIME_DIR}` here!
  address: '{XDG_RUNTIME_DIR}/sock-{name}' # Unix domain socket
  # address: '127.0.0.1:31415'  # IP socket as 'IP:port'

  buffer_MB: 64

  socket_timeout: 1.0 # affects all socket types
source:
  address: '127.0.0.1:31415'

playback:
  handshake: client_hello # expect 'CLIENT_HELLO_PACKET' at start
                          # 'none': just playback all of the data
  handshake_timeout: 10.0

  rate: 'unlimited' # 'unlimited': as fast as possible
                    # 'normal': at realtime speed, from time of first packet in stream

  # *** NOT YET IMPLEMENTED! ***
  timestamps:
    offset: none # 'none'
                 # 'start': subtract the start time

  # *** NOT YET IMPLEMENTED! ***
  ignore_packets: [] # no filtering
                     # [<list of packet types to ignore>, ...]

  packet_ordering: yaml  # 'yaml': preserve input file order (e.g. YAML FILES)
                         # 'mtime': sort by the file-modification timestamp
                         # 'sequence_number': sort by the sequence number in the filename, as generated by `record` mode
                         # 'timestamp': sort by the ADARA packet timestamp

  packet_glob: '*.adara' # all packet files in a directory

record:
  transfer_limit: 16000 # MB

  # How to write recorded packets to the output file[s]:
  #   'single_packet' -> one .adara file per packet
  #   'multi_packet'  -> all packets into a single 'session.adara' file
  file_output: multi_packet

summarize:
  timestamp_per_type: false   # if true, log per-packet-type timestamp ranges in summarize output
  timestamp_resolution: 0.017 # resolution for timestamp comparison

logging:
  format: '%(asctime)s: %(levelname)s: %(message)s'

  level: INFO # DEBUG: packet summary at send and receive
              # WARNING: use DEBUG sparingly: it generates a lot of logging, and will slow down playback!

  # The ``{PID}`` will be automatically be substituted when present -- it's highly recommended to use this!
  filename: ${ADARA_PLAYER_LOGS}/session.{PID}.log

  # `Packet` summary format.
  packet_summary: "type: {type:#06x}: {timestamp}, size: {size:>7}, CRC: {CRC:#010x}"
