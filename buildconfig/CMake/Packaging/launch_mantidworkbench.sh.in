#!/bin/sh
#
# Launch mantidworkbench using any necessary LD_PRELOAD behaviour
#
# Script is configured by CMake

@PREAMBLE@
@JEMALLOC_DEFINITIONS@

@VIRTUAL_GL_WRAPPER@

# Define where python libraries are
LOCAL_PYTHONPATH=@LOCAL_PYPATH@
if [ -n "${PYTHONPATH}" ]; then
    LOCAL_PYTHONPATH=${LOCAL_PYTHONPATH}:${PYTHONPATH}
fi

@GDB_DEFINITIONS@

@GSETTINGS_SCHEMA_DEFINITIONS@

# Launch the workbench
LD_PRELOAD=${LOCAL_PRELOAD} \
    PYTHONPATH=${LOCAL_PYTHONPATH} @QT_QPA@ \
    GSETTINGS_SCHEMA_DIR=${GSETTINGS_SCHEMA_DIR}:${GSETTINGS_MANTID_PATH} \
    @WRAPPER_PREFIX@$VGLRUN $GDB \
    @PYTHON_EXEC_LOCAL@@PYTHON_ARGS@ @MANTIDWORKBENCH_EXEC@ $SINGLEPROCESS "$@"@WRAPPER_POSTFIX@
